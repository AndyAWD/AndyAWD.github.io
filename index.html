<!DOCTYPE html>
<html lang="zh-TW">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="bootstrap.min.css" rel="stylesheet" />
        <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
        <link href="index.css" rel="stylesheet" />
        <title>軟體工程師 MBTI 風格測試</title>
    </head>
    <body class="p-5 pt-0 resultBackground">
        <div class="logo">
            <img src="assets/logo.png" alt="logo" />
        </div>
        <div class="content p-5 pt-4 shadow">
            <div id="quizWrapper" style="display: none">
                <h1 class="text-center mb-3">軟體工程師 MBTI 風格測試</h1>
                <p>
                    嘿，準備好來場輕鬆有趣的自我探索了嗎？我們知道你的腦袋裡藏著無數的代碼和奇思妙想。來試試這個迷你版
                    MBTI 測試吧！看看在 Devfest 2024
                    這個派對裡，你會是什麼樣的獨特存在。別擔心，這不是什麼嚴肅的心理評估，而是幫你在人群中找到志同道合的「碼友」。選出最符合你的選項：
                </p>
                <div id="quiz">
                    <!-- 問題將在這裡動態生成 -->
                </div>
                <div class="d-grid pt-3">
                    <button
                        class="btn btn-primary"
                        id="submit"
                        style="display: none"
                    >
                        提交答案
                    </button>
                </div>
            </div>
            <div id="result" style="display: block">
                <h2 class="text-center mb-4">你的 MBTI 類型是：</h2>
                <div id="resultContent" class="resultContent container">
                    <!-- 結果將在這裡顯示 -->
                    <div class="row g-3">
                        <div class="col-6 resultImage">
                            <img
                                src="assets/android-bot/0000_1.png"
                                alt="mbti android bot image"
                            />
                        </div>
                        <div class="col-6">
                            <div class="resultTitle">
                                <h1 class="resultBinary px-5 py-3">
                                    <span>0</span>
                                    <span>0</span>
                                    <span>0</span>
                                    <span>0</span>
                                </h1>
                                <div class="resultCharacter">
                                    <span class="p-2 px-4">#謹慎</span>
                                    <span class="p-2 px-4">#組織</span>
                                    <span class="p-2 px-4">#專注</span>
                                    <span class="p-2 px-4">#邏輯</span>
                                    <span class="p-2 px-4">#富同情心</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row px-5 py-4">
                        <div class="resultDescription p-4">
                            <p>
                                你是社群中的可靠貢獻者。你注重細節，善於系統性地解決問題。在團隊中，你的貢獻總是精確且有價值。
                            </p>
                            <div class="text-center">
                                <img src="001.jpg" alt="ISTJ" />
                            </div>
                        </div>
                    </div>
                    <div class="row p-3">
                        <div class="col-6 resultFriends container px-5">
                            <h3 class="text-center">社群好朋友</h3>
                            <div class="row">
                                <div class="col friendImage">
                                    <img
                                        src="assets/android-bot/0001_1.png"
                                        alt="ESFP"
                                    />
                                </div>
                                <div class="col friendName"><h3>ESFP</h3></div>
                            </div>
                            <div class="row">
                                <div class="col friendName"><h3>ESFP</h3></div>
                                <div class="col friendImage">
                                    <img
                                        src="assets/android-bot/1001_1.png"
                                        alt="ESFP"
                                    />
                                </div>
                            </div>
                        </div>
                        <div class="col-6 devfestMap">
                            <img
                                src="assets/devfest-map.png"
                                alt="devfest map"
                            />
                        </div>
                    </div>
                </div>
                <div class="d-grid pt-3">
                    <button id="download" class="btn btn-primary">
                        下載結果圖
                    </button>
                </div>
                <div id="test"></div>
            </div>
        </div>

        <script>
            const questions = [
                {
                    question: "在社群研討會交流時間，你傾向於：",
                    answers: {
                        a: "主動找人聊天，分享自己的經驗和想法。",
                        b: "在座位上休息，等待下一場議程的到來。",
                    },
                    dimension: "EI",
                },
                {
                    question: "在社群研討會上聽到不懂的問題，你傾向於：",
                    answers: {
                        a: "與講者或會眾交流討論，集思廣益。",
                        b: "獨自思考，查閱相關資料深入研究。",
                    },
                    dimension: "EI",
                },
                {
                    question: "報名參加社群研討會，你傾向於：",
                    answers: {
                        a: "與同事朋友們一起報名參加。",
                        b: "獨自報名參加。",
                    },
                    dimension: "EI",
                },
                {
                    question: "在社群研討會聽到一個新的技術時，你通常會：",
                    answers: {
                        a: "立即思考如何將其應用到專案中。",
                        b: "閱讀文件，深入瞭解其原理和實作細節。",
                    },
                    dimension: "SN",
                },
                {
                    question:
                        "在社群研討會問與答的環節，輪到你發問，你通常會：",
                    answers: {
                        a: "探討該技術的廣泛應用前景。",
                        b: "深入詢問技術實現的細節。",
                    },
                    dimension: "SN",
                },
                {
                    question: "專案在技術選型討論中，你通常會:",
                    answers: {
                        a: "創新性，是否為最創新的技術。",
                        b: "穩定性，社群支援和生態系統。",
                    },
                    dimension: "SN",
                },
                {
                    question: "在評估導入技術方案時，你更關注：",
                    answers: {
                        a: "技術可行性和效率。",
                        b: "團隊和用戶的影響。",
                    },
                    dimension: "TF",
                },
                {
                    question: "在解決技術問題時，你更關注：",
                    answers: {
                        a: "邏輯分析和系統思考。",
                        b: "直覺和過往經驗。",
                    },
                    dimension: "TF",
                },
                {
                    question: "當使用者對你的提出問題時，你更關注：",
                    answers: {
                        a: "快速響應，提供友好的用戶體驗。",
                        b: "深入分析，提供最佳的技術方案。",
                    },
                    dimension: "TF",
                },
                {
                    question: "參加社群研討會後，你會希望：",
                    answers: {
                        a: "仔細評估新技術，制定學習計畫。",
                        b: "立即嘗試將學到的新技術實作到專案中。",
                    },
                    dimension: "JP",
                },
                {
                    question: "如果你要舉辦一場社群研討會，你會希望：",
                    answers: {
                        a: "精心設計的流程和時間安排。",
                        b: "靈活的議程安排，根據現場情況調整。",
                    },
                    dimension: "JP",
                },
                {
                    question: "社群研討會的多軌議程公開後，你會希望：",
                    answers: {
                        a: "依照議程表規劃一日議程清單，不浪費時間。",
                        b: "到會場再決定要聽的議程，隨心所欲。",
                    },
                    dimension: "JP",
                },
            ];

            const results = {
                ISTJ: {
                    description:
                        "你是社群中的可靠貢獻者。你注重細節，善於系統性地解決問題。在團隊中，你的貢獻總是精確且有價值。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/001.jpg",
                    binary: "0000",
                    characters: ["謹慎", "組織", "專注", "邏輯", "可靠"],
                    friend: "ESFP、ESTP",
                },
                ISFJ: {
                    description:
                        "你是社群中的細心支持者。你關注用戶需求，善於發現和解決潛在問題。你的耐心和同理心使你成為優秀的社群維護者。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/002.jpg",
                    binary: "0001",
                    characters: ["細心", "支持", "實際", "忠誠", "安靜"],
                    friend: "ESFP、ESTP",
                },
                INFJ: {
                    description:
                        "你是社群中的遠見者。你能洞察項目的長期發展方向，常常提出富有創意的解決方案。你的洞察力對社群發展至關重要。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/003.jpg",
                    binary: "0010",
                    characters: ["洞察", "理想", "創新", "深思", "溫和"],
                    friend: "ENFP、ENTP",
                },
                INTJ: {
                    description:
                        "你是社群中的策略家。你善於設計大型系統的整體架構，提出創新的技術方案。你的遠見卓識常常引領社群的技術方向。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/004.jpg",
                    binary: "0011",
                    characters: ["戰略", "獨立", "分析", "遠見", "決斷"],
                    friend: "ENFP、ENTP",
                },
                ISTP: {
                    description:
                        "你是社群中的技術大師。對各種編程語言和工具瞭如指掌，能夠快速解決複雜的技術難題。你對社群需求的實踐能力非常出色。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/005.jpg",
                    binary: "0100",
                    characters: ["靈活", "觀察", "實用", "冷靜", "適應"],
                    friend: "ESFJ、ESTJ",
                },
                ISFP: {
                    description:
                        "你是社群中的體驗專家。善於從會眾的角度思考問題。你的貢獻總能讓會眾舒服的參與社群活動。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/006.jpg",
                    binary: "0101",
                    characters: ["藝術", "和諧", "開放", "靈敏", "謙遜"],
                    friend: "ENFJ、ESFJ",
                },
                INFP: {
                    description:
                        "你是社群中的創意之源。常常提出獨特的想法,為項目帶來創新的解決方案。你在腦暴會議中的貢獻尤其突出。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/007.jpg",
                    binary: "0110",
                    characters: ["富同情心", "創意", "理想", "好奇", "熱情"],
                    friend: "ENFJ、ENTJ",
                },
                INTP: {
                    description:
                        "你是社群中的概念設計師。善於抽象思考和模式識別,常常優化系統架構。你的分析能力在技術討論中特別有價值。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/008.jpg",
                    binary: "0111",
                    characters: ["邏輯", "創新", "概念", "好奇", "獨立"],
                    friend: "ENTJ、ESTJ",
                },
                ESTP: {
                    description:
                        "你是社群中的快速問題解決者。能夠靈活應對各種挑戰,在緊急情況下表現出色。你在即時編程挑戰中常常脫穎而出。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/009.jpg",
                    binary: "1000",
                    characters: ["活躍", "果斷", "實用", "冒險", "適應"],
                    friend: "ISFJ、ISTJ",
                },
                ESFP: {
                    description:
                        "你是社群中的活力之源。善於組織有趣的編程活動,提高團隊士氣。你的熱情能夠感染其他成員,促進社群互動。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/010.jpg",
                    binary: "1001",
                    characters: ["熱情", "友善", "即興", "樂觀", "活潑"],
                    friend: "ISFJ、ISTJ",
                },
                ENFP: {
                    description:
                        "你是社群中的創新推動者。充滿新想法,善於激發他人的創造力。你在頭腦風暴和跨界合作項目中表現尤為出色。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/011.jpg",
                    binary: "1010",
                    characters: ["熱情", "創意", "靈活", "樂觀", "富同情心"],
                    friend: "INFJ、INTJ",
                },
                ENTP: {
                    description:
                        "你是社群中的思想領袖。善於辯論和分析,常常挑戰現有觀念。你的批判性思維有助於優化社群的決策過程和技術方向。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/012.jpg",
                    binary: "1011",
                    characters: ["創新", "機智", "適應", "好辯", "活躍"],
                    friend: "INFJ、INTJ",
                },
                ESTJ: {
                    description:
                        "你是社群中的組織者。善於管理大型項目和活動,確保一切按計劃進行。你的領導能力使你成為社群活動的理想協調者。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/013.jpg",
                    binary: "1100",
                    characters: ["果斷", "組織", "實際", "直接", "負責"],
                    friend: "INTP、ISFP",
                },
                ESFJ: {
                    description:
                        "你是社群中的和諧促進者。善於處理人際關係,協調不同觀點。你的溝通技巧使你成為團隊合作和社群建設的關鍵人物。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/014.jpg",
                    binary: "1101",
                    characters: ["友善", "合作", "負責", "組織", "細心"],
                    friend: "ISFP、ISTP",
                },
                ENFJ: {
                    description:
                        "你是社群中的激勵者。善於識別他人潛力並給予鼓勵。你的領導力能夠凝聚團隊,在社群項目中創造出色的成果。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/015.jpg",
                    binary: "1110",
                    characters: [
                        "富同情心",
                        "鼓舞",
                        "領導",
                        "理想",
                        "有說服力",
                    ],
                    friend: "INFP、ISFP",
                },
                ENTJ: {
                    description:
                        "你是社群中的願景實現者。具有出色的戰略思維,善於制定長期規劃。你的遠見卓識引領社群不斷成長,挑戰新的技術高峰。",
                    image: "http://w4.loxa.edu.tw/ly955026/Picture/KUSO/016.jpg",
                    binary: "1111",
                    characters: ["果斷", "戰略", "領導", "自信", "有魄力"],
                    friend: "INFP、INTP",
                },
            };

            function buildQuiz() {
                const output = [];
                questions.forEach((question, index) => {
                    const answers = [];
                    for (letter in question.answers) {
                        answers.push(
                            `<div class="form-check ms-4">
                        <input class="form-check-input" type="radio" name="question${index}" value="${letter}" id="question${index}-${letter}">
                        <label class="form-check-label" for="question${index}-${letter}">
                            ${question.answers[letter]}
                        </label>
                        </div>`
                        );
                    }
                    output.push(
                        `<div class="question">
                        <p class="mb-2 mt-3">${question.question}</p>
                        ${answers.join("")}
                    </div>`
                    );
                });
                quizContainer.innerHTML = output.join("");
            }

            function showResults() {
                const answerContainers =
                    quizContainer.querySelectorAll(".question");
                let mbti = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

                questions.forEach((question, index) => {
                    const answerContainer = answerContainers[index];
                    const selector = `input[name=question${index}]:checked`;
                    const userAnswer = (
                        answerContainer.querySelector(selector) || {}
                    ).value;

                    if (userAnswer === "a") {
                        mbti[question.dimension[0]]++;
                    } else if (userAnswer === "b") {
                        mbti[question.dimension[1]]++;
                    }
                });

                const type =
                    (mbti.E > mbti.I ? "E" : "I") +
                    (mbti.S > mbti.N ? "S" : "N") +
                    (mbti.T > mbti.F ? "T" : "F") +
                    (mbti.J > mbti.P ? "J" : "P");

                const result = results[type];
                //     resultContainer.innerHTML = `
                //     <h2>你的 MBTI 類型是：</h2>

                //     <div>
                //                 <div></div>
                //         <div></div>
                //     </div>
                //     <p>${result.description}</p>
                //     <img src="${result.image}" alt="${type}">
                // `;
                //     resultContainer.style.display = "block";
                //     quizWrapper.style.display = "none";
            }

            const quizContainer = document.getElementById("quiz");
            const resultContainer = document.getElementById("result");
            const submitButton = document.getElementById("submit");
            const quizWrapper = document.getElementById("quizWrapper");

            buildQuiz();

            submitButton.style.display = "block";
            submitButton.addEventListener("click", showResults);

            // 添加選項改變事件監聽器
            document.addEventListener("change", function (e) {
                if (e.target.matches('input[type="radio"]')) {
                    const allAnswered = Array.from(
                        document.querySelectorAll(".question")
                    ).every((question) =>
                        question.querySelector("input:checked")
                    );
                    submitButton.disabled = !allAnswered;
                }
            });

            // 初始禁用提交按鈕
            // submitButton.disabled = true;

            document
                .getElementById("download")
                .addEventListener("click", function () {
                    html2canvas(document.getElementById("resultContent")).then(
                        function (canvas) {
                            // 獲取畫布上下文
                            var ctx = canvas.getContext("2d");
                            // 將畫布轉換成圖片
                            var link = document.createElement("a");
                            link.href = canvas.toDataURL("image/png");
                            link.download = "result.png";
                            link.click();
                        }
                    );
                });
        </script>
    </body>
</html>
